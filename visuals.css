/* =========================
visuals.css (FLOWCHART ONLY)
Paste this into visuals.css or create a separate flowchart.css
========================= */

/* Tokens (safe if already defined elsewhere) */
:root{
  --navy:#0B2E4F;
  --slate:#2F5D8A;
  --teal:#2AA198;
  --bg:#F5F7FA;
  --line:#D7DEE6;
  --text:#1f2937;
  --muted:#5E6B7A;
  --white:#ffffff;

  --amber-bg:#FFF6E7;
  --amber-border:#FFB347;
  --teal-soft:#E6F4F3;

  --radius-sm:16px;
  --shadow-soft: 0 10px 30px rgba(11,46,79,.10);
  --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Helvetica Neue", sans-serif;
}

.page{
  padding: 28px 16px 40px;
  display:flex;
  justify-content:center;
  background: var(--bg);
  font-family: var(--font);
  color: var(--text);
}

.card-visual{
  width:min(1040px, 100%);
}

.visual--flow .flow-head h1{
  margin: 0 0 6px;
  font-size: clamp(26px, 3.4vw, 44px);
  letter-spacing: -0.02em;
  color: var(--navy);
  font-weight: 900;
}

.visual--flow .flow-head p{
  margin: 0 0 18px;
  color: var(--muted);
  font-size: 16px;
}

/* --- Grid (clean) --- */
.flowgrid.flowgrid--clean{
  position: relative;
  padding: 14px 8px 28px;
  display:grid;
  grid-template-columns: 1.05fr 1fr 1fr 1.05fr 1fr;
  grid-template-rows: 170px 46px 190px 170px; /* label row included */
  gap: 18px 18px;
}

/* Placement */
.flowgrid--clean .r1c1{ grid-column:1; grid-row:1; }
.flowgrid--clean .r1c2{ grid-column:2; grid-row:1; }
.flowgrid--clean .r1c3{ grid-column:3; grid-row:1; }
.flowgrid--clean .r1c4{ grid-column:4; grid-row:1; }
.flowgrid--clean .r1c5{ grid-column:5; grid-row:1; }

.flowgrid--clean .r2c2{ grid-column:2; grid-row:3; }
.flowgrid--clean .r2c3{ grid-column:3; grid-row:3; }
.flowgrid--clean .r2c5{ grid-column:5; grid-row:3; }

.flowgrid--clean .r3c2{ grid-column:2; grid-row:4; }
.flowgrid--clean .r3c5stack{ grid-column:5; grid-row:4; align-self:stretch; }

/* Nodes */
.node{
  background: var(--white);
  border: 2px solid var(--line);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-soft);
  padding: 14px 14px;
  display:grid;
  gap: 6px;
  align-content:center;
}

.node.strong{
  border-color: rgba(47,93,138,.65);
}

.node__title{
  font-weight: 900;
  color: var(--navy);
  font-size: 14px;
}

.node__body{
  font-size: 18px;
  line-height: 1.2;
}

.node__body--center{
  text-align:center;
  font-weight: 900;
  color: var(--navy);
}

.node__sub{
  color: var(--muted);
  font-size: 14px;
  line-height: 1.25;
  text-align:center;
}

/* Decision nodes */
.node.decision{
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
  display:grid;
  place-items:center;
  position:relative;
}

.node.decision .node__body{
  position:absolute;
  width: 78%;
  max-width: 220px;
  text-align:center;
  font-weight: 900;
  color: var(--navy);
  font-size: 18px;
  line-height: 1.12;
}

.diamond{
  width: 210px;
  height: 140px;
  background: rgba(234,242,250,.95);
  border: 5px solid var(--teal);
  transform: rotate(45deg);
  border-radius: 12px;
  box-shadow: var(--shadow-soft);
}

/* Yes/No labels row */
.label{
  grid-row:2;
  align-self:center;
  justify-self:center;
  font-size: 14px;
  font-weight: 900;
  color: var(--muted);
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.75);
  border: 1px solid var(--line);
}
.label.yes{ color: #1f6f66; }
.label.no{ color: #6b7280; }

.l-yes-1{ grid-column:2; justify-self:end; margin-right:-6px; }
.l-no-1 { grid-column:2; justify-self:start; margin-left:-6px; }

.l-yes-2{ grid-column:3; justify-self:end; margin-right:-6px; }
.l-no-2 { grid-column:3; justify-self:start; margin-left:-6px; }

.l-yes-3{ grid-column:5; justify-self:end; margin-right:-6px; }
.l-no-3 { grid-column:5; justify-self:start; margin-left:-6px; }

/* Branch spines: stable, no drifting lines */
.branch{
  position: relative;
}
.branch::before{
  content:"";
  position:absolute;
  left:50%;
  top:-58px;              /* reaches from label row into the card */
  transform:translateX(-50%);
  width:0;
  height:58px;
  border-left: 4px solid var(--slate);
  opacity:.9;
}

/* Right lane: its own spine */
.lane{
  display:grid;
  grid-auto-rows: 1fr;
  gap: 14px;
}

.lane--yes{
  position: relative;
  padding-top: 6px;
}
.lane--yes::before{
  content:"";
  position:absolute;
  left:50%;
  top:-58px;
  transform:translateX(-50%);
  width:0;
  height:58px;
  border-left: 4px solid var(--slate);
  opacity:.9;
}
.lane--yes::after{
  content:"";
  position:absolute;
  left:50%;
  top: 38px;
  bottom: 22px;
  transform:translateX(-50%);
  width:0;
  border-left: 4px solid var(--slate);
  opacity:.55;
}

/* End states */
.node.end{ border-width: 3px; }
.node.end.warn{
  background: var(--amber-bg);
  border-color: var(--amber-border);
}
.node.end.ok{
  background: var(--teal-soft);
  border-color: var(--teal);
}

.endstack{
  display:grid;
  gap: 14px;
  align-content:start;
}

/* Tag chip */
.tag{
  justify-self:center;
  margin-top: 4px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  color: var(--muted);
  font-size: 12px;
  background: rgba(255,255,255,.7);
}

/* Legend (optional, but matches your screenshot) */
.legend{
  margin-top: 16px;
  width: min(360px, 100%);
  background: var(--white);
  border: 2px solid var(--line);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-soft);
  padding: 14px 16px;
}

.legend__title{
  font-weight: 900;
  color: var(--navy);
  margin-bottom: 10px;
}

.legend__row{
  display:flex;
  align-items:center;
  gap:10px;
  color: var(--text);
  font-size: 14px;
  margin: 8px 0;
}

.legend__swatch{
  width: 32px;
  height: 18px;
  border-radius: 8px;
  border: 2px solid var(--line);
  background: var(--white);
}
.legend__swatch.decision{
  width: 20px;
  height: 20px;
  border-radius: 4px;
  transform: rotate(45deg);
  border: 3px solid var(--teal);
  background: rgba(234,242,250,.95);
}
.legend__swatch.end{
  background: var(--teal-soft);
  border-color: var(--teal);
}

.flow-foot{
  margin-top: 10px;
  color: var(--muted);
  font-size: 13px;
}

/* Responsive: stack on mobile */
@media (max-width: 880px){
  .flowgrid.flowgrid--clean{
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  .label{ display:none; }

  .flowgrid--clean .r1c1,
  .flowgrid--clean .r1c2,
  .flowgrid--clean .r1c3,
  .flowgrid--clean .r1c4,
  .flowgrid--clean .r1c5,
  .flowgrid--clean .r2c2,
  .flowgrid--clean .r2c3,
  .flowgrid--clean .r2c5,
  .flowgrid--clean .r3c2,
  .flowgrid--clean .r3c5stack{
    grid-column:1;
    grid-row:auto;
  }

  .branch::before,
  .lane--yes::before,
  .lane--yes::after{
    display:none;
  }

  .node.decision .node__body{
    position:static;
    width:auto;
    max-width:none;
  }

  .diamond{
    width: 190px;
    height: 130px;
    justify-self:center;
  }
}
